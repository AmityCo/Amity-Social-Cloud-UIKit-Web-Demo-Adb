npm_publish:
  stage: publish
  script:
    - echo "//registry.npmjs.org/:_authToken=$NPM_TOKEN" > .npmrc
    - |
      [[ "$CI_COMMIT_TAG" =~ -rc.[0-9]+$ ]] && TAG="--tag development"
    - npm publish $TAG --access public
  rules:
    - if: '$CI_COMMIT_TAG =~ /(?i)^v[0-9]+\.[0-9]+\.[0-9]+(-rc.[0-9]+)?$/'
